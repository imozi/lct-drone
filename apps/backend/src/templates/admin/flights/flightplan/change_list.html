{% extends "admin/change_list.html" %}
{% load i18n admin_urls static %}

{% block object-tools-items %}
    {{ block.super }}

    {% if upload_excel_url %}
        <li>
            <a href="{% url upload_excel_url %}" class="addlink" style="
                background: linear-gradient(135deg, #28a745, #20c997);
                color: white;
                padding: 8px 15px;
                border-radius: 5px;
                text-decoration: none;
                margin-left: 5px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                transition: all 0.3s ease;
            " onmouseover="this.style.background='linear-gradient(135deg, #218838, #1ea58a)'; this.style.transform='translateY(-1px)';"
               onmouseout="this.style.background='linear-gradient(135deg, #28a745, #20c997)'; this.style.transform='translateY(0)';">
                üìä –ó–∞–≥—Ä—É–∑–∏—Ç—å Excel —Ñ–∞–π–ª
            </a>
        </li>
    {% endif %}

{% endblock %}

{% block extrahead %}
    {{ block.super }}
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ */
        .object-tools li {
            margin-left: 5px;
        }

        .object-tools a {
            font-weight: 500;
            font-size: 13px;
        }

        .object-tools a:active {
            transform: translateY(0) !important;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —Å–ø–∏—Å–∫–∞ */
        #result_list th {
            position: sticky;
            top: 0;
            background: #f8f9fa;
            z-index: 10;
        }

        /* –í—ã–¥–µ–ª–µ–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ */
        #result_list td:nth-child(2) { /* flight_id */
            font-weight: bold;
            color: #007cba;
        }

        #result_list td:nth-child(3) { /* planned_date */
            font-weight: 500;
        }

        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞ */
        .flight-status {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .flight-status.planned {
            background: #fff3cd;
            color: #856404;
        }

        .flight-status.departed {
            background: #cce7ff;
            color: #0056b3;
        }

        .flight-status.completed {
            background: #d4edda;
            color: #155724;
        }

        .flight-status.cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç */
        .coordinates {
            font-family: 'Courier New', monospace;
            font-size: 11px;
            color: #6c757d;
        }
    </style>
{% endblock %}

{% block result_list %}
    {{ block.super }}

    {% if cl.result_count > 0 %}
        <div class="results-summary" style="
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
        ">
            <h4 style="margin: 0 0 10px 0; color: #1976d2;">üìä –ö—Ä–∞—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
            <div style="display: flex; flex-wrap: wrap; gap: 20px;">
                <div>
                    <strong>–í—Å–µ–≥–æ –ø–ª–∞–Ω–æ–≤ –ø–æ–ª–µ—Ç–æ–≤:</strong> {{ cl.result_count }}
                </div>
                <div>
                    <strong>–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:</strong> {{ cl.result_list|length }}
                </div>
            </div>
            <div style="margin-top: 10px; font-size: 12px; color: #666;">
                üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã —Å–ª–µ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª–µ—Ç–æ–≤
            </div>
        </div>
    {% endif %}
{% endblock %}